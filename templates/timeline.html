{% extends "shared/base.html" %}
{% from "shared/header-nav.html" import nav_head, nav_content %}
{% from "shared/dialog.html" import dialog_head, dialog_content %}
{% block head -%}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
{{ nav_head }}
<link href="public/styles/timeline.css" rel="stylesheet">
{{ dialog_head }}
{%- endblock head %}

{% block content -%}
{% set page_current = "/timeline" -%}
{{ nav_content }}
<main>
  <section class="timeline">
    <div class="timeline__header">
    </div>
    <div class="squeaks">
      <a href="#top">
        <img src="public/images/timeline/squeaks.png">
        Back to top
      </a>
    </div>
    {% for event in events %}
    <div class="timeline__separator">
      <a href="#{{ loop.index }}">
        <event-marker>
        {%- if not event.highlight -%}
          <dice></dice>
        {%- else -%}
          <star></star>
        {%- endif -%}
        </event-marker>
      </a>
    </div>
    {%- if loop.first -%}
    <section class="timeline__info aussie" id="{{ loop.index }}">
    {%- else -%}
    <section class="timeline__info" id="{{ loop.index }}">
    {%- endif -%}
      <div class="timeline__date">{{ event.date }}</div>
      <div class="timeline__title">{{ event.title }}</div>
      {% if event.subtitle %}
      <p class="timeline__subtitle">{{ event.subtitle }}</p>
      {% endif %}
      {% if event.collabed_with -%}
      <ul class="timeline__collablist">
        Featuring
      {% for name in event.collabed_with -%}
        <li>{{ name }}</li>
      {%- endfor %}
      </ul>
      {%- endif %}
    </section>
    {%- if loop.first -%}
    <section class="timeline__media aussie">
    {%- else -%}
    <section class="timeline__media">
    {%- endif -%}
      {% if event.media.is_youtube and event.media.video_id -%}
      <div class="video placeholder" data-video_id="{{event.media.video_id}}" {%- if event.media.video_start -%}data-video_start="{{event.media.video_start}}"{%- endif -%}>
        <img src="{{ event.media.path }}" loading="lazy" width="{{ event.media.width }}" height="{{ event.media.height }}">
        <play-icon>
          <circle></circle>
          <triangle></triangle>
        </play-icon>
      </div>
      {%- else -%}
      <a href="{{ event.media.link }}" target="_blank">
        <img src="{{ event.media.path }}" loading="lazy" width="{{ event.media.width }}" height="{{ event.media.height }}">
      </a>
      {%- endif -%}
    </section>
    {% endfor %}
    <div class="timeline__footer"></div>
  </section>
</main>
{{ dialog_content }}
{%- endblock content %}
